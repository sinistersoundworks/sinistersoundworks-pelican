<!DOCTYPE html>
<html lang="{{ DEFAULT_LANG }}">
<head>
  {% if SITEURL == 'https://sinistersoundworks.com' %}
  <script defer data-domain="{{ ANALYTICS_DOMAIN }}" src="{{ ANALYTICS_URL }}"></script>
  {% endif %}

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="{{ SITE_DESCRIPTION }}" />
  <meta name="author" content="{{ AUTHOR }}" />
  
  <title>
    {% block title %}
    {% if page and page.title %}{{ page.title }} | {{ SITENAME }}{% elif article and article.title %}{{ article.title }} | {{ SITENAME }}{% else %}{{ SITENAME }}{% endif %}
    {% endblock %}
  </title>

  <!-- Bootstrap core CSS -->
  <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Custom fonts for this template -->
  <link href="/assets/css/all.min.css" rel="stylesheet" type="text/css" />
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;500&display=swap" rel="stylesheet" type="text/css" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@200;300;400;500;700&display=swap" rel="stylesheet" type="text/css" />

  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" />
  <link rel="manifest" href="/assets/site.webmanifest" />
  
  <!-- Custom styles for this theme -->
  <link href="/assets/css/agency.css" rel="stylesheet" />
  <link href="/assets/img/favicon.png" rel="shortcut icon" type="image/png" />

  <!-- Plyr CSS -->
  <link rel="stylesheet" href="https://cdn.plyr.io/3.7.3/plyr.css" />
  
  <!-- LineIcons -->
  <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
  
  <!-- Custom color overrides -->
  <style>
    :root {
      --primary-color: #fed136;
      --primary-hover: #e6bc2f;
    }
    
    /* Primary buttons */
    .btn-primary {
      background-color: var(--primary-color) !important;
      border-color: var(--primary-color) !important;
      color: #212529 !important;
    }
    
    .btn-primary:hover, .btn-primary:focus, .btn-primary:active {
      background-color: var(--primary-hover) !important;
      border-color: var(--primary-hover) !important;
      color: #212529 !important;
    }
    
    /* Navigation links */
    .navbar-nav .nav-link:hover,
    .navbar-nav .nav-link:focus {
      color: var(--primary-color) !important;
    }
    
    /* Section headings and text-primary */
    .text-primary {
      color: var(--primary-color) !important;
    }
    
    /* Links */
    a {
      color: var(--primary-color);
    }
    
    a:hover {
      color: var(--primary-hover);
    }
    
    /* Footer links */
    .link-dark:hover {
      color: var(--primary-color) !important;
    }
    
    /* Social buttons */
    .btn-social:hover {
      background-color: var(--primary-color) !important;
      border-color: var(--primary-color) !important;
      color: #212529 !important;
    }
    
    /* Contact form focus states */
    .form-control:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.2rem rgba(254, 209, 54, 0.25);
    }
    
    /* Plyr primary color override */
    .plyr--audio .plyr__control.plyr__tab-focus,
    .plyr--audio .plyr__control:hover,
    .plyr--audio .plyr__control[aria-expanded=true] {
      background: var(--primary-color) !important;
      color: #212529 !important;
    }
    
    .plyr__progress input[type=range] {
      color: var(--primary-color);
    }
  </style>

  {% if page and page.template == "page" %}
  <style>
    #pagecontainer {
      padding-top: 150px;
    }
    @media only screen and (max-width: 991px) {
      #pagecontainer {
        padding-top: 100px;
      }
    }
  </style>
  {% endif %}
</head>

<body id="page-top">
  {% include 'navbar.html' %}
  
  {% block content %}
  {% endblock %}
  
  {% include 'footer.html' %}

  <!-- Bootstrap core JavaScript -->
  <script src="/assets/js/bootstrap.bundle.min.js"></script>
  
  <!-- Plugin JavaScript -->
  <script src="/assets/js/agency.min.js"></script>
  
  
  <!-- Plyr -->
  <script src="https://cdn.plyr.io/3.7.3/plyr.polyfilled.js"></script>
  <script>
    const controls = `
    <div class="plyr__controls">
      <button type="button" class="plyr__control" data-plyr="restart">
        <svg role="presentation"><use xlink:href="#plyr-restart"></use></svg>
        <span class="plyr__tooltip" role="tooltip">Restart</span>
      </button>
      <button type="button" class="plyr__control" data-plyr="rewind">
        <svg role="presentation"><use xlink:href="#plyr-rewind"></use></svg>
        <span class="plyr__tooltip" role="tooltip">Rewind {seektime} secs</span>
      </button>
      <button type="button" class="plyr__control" aria-label="Play, {title}" data-plyr="play">
        <svg class="icon--pressed" role="presentation"><use xlink:href="#plyr-pause"></use></svg>
        <svg class="icon--not-pressed" role="presentation"><use xlink:href="#plyr-play"></use></svg>
        <span class="label--pressed plyr__tooltip" role="tooltip">Pause</span>
        <span class="label--not-pressed plyr__tooltip" role="tooltip">Play</span>
      </button>
      <button type="button" class="plyr__control" data-plyr="fast-forward">
        <svg role="presentation"><use xlink:href="#plyr-fast-forward"></use></svg>
        <span class="plyr__tooltip" role="tooltip">Forward {seektime} secs</span>
      </button>
      <div class="plyr__progress">
        <input data-plyr="seek" type="range" min="0" max="100" step="0.01" value="0" aria-label="Seek">
        <progress class="plyr__progress__buffer" min="0" max="100" value="0">% buffered</progress>
        <span role="tooltip" class="plyr__tooltip">00:00</span>
      </div>
      <div class="plyr__time plyr__time--current" aria-label="Current time">00:00</div>
      <div class="plyr__time plyr__time--duration" aria-label="Duration">00:00</div>
      <button type="button" class="plyr__control" aria-label="Mute" data-plyr="mute">
        <svg class="icon--pressed" role="presentation"><use xlink:href="#plyr-muted"></use></svg>
        <svg class="icon--not-pressed" role="presentation"><use xlink:href="#plyr-volume"></use></svg>
        <span class="label--pressed plyr__tooltip" role="tooltip">Unmute</span>
        <span class="label--not-pressed plyr__tooltip" role="tooltip">Mute</span>
      </button>
      <div class="plyr__volume">
        <input data-plyr="volume" type="range" min="0" max="1" step="0.05" value="1" autocomplete="off" aria-label="Volume">
      </div>
    </div>
    `;
    const players = Array.from(document.querySelectorAll('.plyr-audio', { controls })).map((p) => new Plyr(p));
    
    // Add mutual exclusion - pause other players when one starts playing
    players.forEach((player, index) => {
      player.on('play', () => {
        players.forEach((otherPlayer, otherIndex) => {
          if (otherIndex !== index && !otherPlayer.paused) {
            otherPlayer.pause();
          }
        });
      });
    });
  </script>
</body>
</html>
